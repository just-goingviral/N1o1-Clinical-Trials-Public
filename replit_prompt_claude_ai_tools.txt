
ðŸ’¡ **Prompt for Replit AI Agent: Claude Clinical Trial Assistant Module**

ðŸ”§ **Project Goal:**
Enhance an existing Flask app for a clinical trial platform by adding an `ai_tools.py` module that connects to Anthropic Claude for real AI logic in medical trial workflows.

ðŸ“¦ **What to Do:**
1. Add a new file in the `routes` folder called `ai_tools.py`.
2. Paste the provided code into it (included below).
3. Ensure the app loads the Blueprint with:
```python
from routes.ai_tools import ai_tools_bp
app.register_blueprint(ai_tools_bp)
```
4. Confirm the following endpoints work using test POST requests:
   - `/api/ai-tools/pre-screening`
   - `/api/ai-tools/generate-note`
   - `/api/ai-tools/patient-sentiment`
   - `/api/ai-tools/dynamic-consent`
   - `/api/ai-tools/ai-report-writer`

ðŸ“‹ **Claude API Key:**
Set `ANTHROPIC_API_KEY` as an environment variable.

ðŸ’» **Test with this JSON:**
```json
{
  "patient_data": "52-year-old male, history of hypertension, taking N1O1 lozenge daily",
  "transcript": "Doctor asked about side effects. Patient reported improved breathing and no adverse events.",
  "feedback": "I feel better overall, my blood pressure stabilized, and I'm sleeping deeper.",
  "consent_form": "This trial involves collecting personal health data...",
  "context": "The trial entered phase 2 with 85% of participants reporting improved vascular function."
}
```
